(self.webpackChunk_geolonia_embed=self.webpackChunk_geolonia_embed||[]).push([[337],{6613:e=>{function t(e){if(!(this instanceof t))return new t(e);this._bbox=e||[1/0,1/0,-1/0,-1/0],this._valid=!!e}e.exports=t,t.prototype.include=function(e){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],e[0]),this._bbox[1]=Math.min(this._bbox[1],e[1]),this._bbox[2]=Math.max(this._bbox[2],e[0]),this._bbox[3]=Math.max(this._bbox[3],e[1]),this},t.prototype.equals=function(e){var o;return o=e instanceof t?e.bbox():e,this._bbox[0]==o[0]&&this._bbox[1]==o[1]&&this._bbox[2]==o[2]&&this._bbox[3]==o[3]},t.prototype.center=function(e){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},t.prototype.union=function(e){var o;return this._valid=!0,o=e instanceof t?e.bbox():e,this._bbox[0]=Math.min(this._bbox[0],o[0]),this._bbox[1]=Math.min(this._bbox[1],o[1]),this._bbox[2]=Math.max(this._bbox[2],o[2]),this._bbox[3]=Math.max(this._bbox[3],o[3]),this},t.prototype.bbox=function(){return this._valid?this._bbox:null},t.prototype.contains=function(e){if(!e)return this._fastContains();if(!this._valid)return null;var t=e[0],o=e[1];return this._bbox[0]<=t&&this._bbox[1]<=o&&this._bbox[2]>=t&&this._bbox[3]>=o},t.prototype.intersect=function(e){return this._valid?(o=e instanceof t?e.bbox():e,!(this._bbox[0]>o[2]||this._bbox[2]<o[0]||this._bbox[3]<o[1]||this._bbox[1]>o[3])):null;var o},t.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var e="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",e)},t.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null}},7829:e=>{e.exports=function(e){return function e(t){return Array.isArray(t)&&t.length&&"number"==typeof t[0]?[t]:t.reduce((function(t,o){return Array.isArray(o)&&Array.isArray(o[0])?t.concat(e(o)):(t.push(o),t)}),[])}(e)}},4506:(e,t,o)=>{var r=o(9340),n=o(11),i=o(7829);e.exports=function(e){if(!e)return[];var t=n(r(e)),o=[];return t.features.forEach((function(e){e.geometry&&(o=o.concat(i(e.geometry.coordinates)))})),o}},9319:(e,t,o)=>{var r=o(4506),n=o(3692),i=o(6613),s={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},l=Object.keys(s);function a(e){for(var t=i(),o=r(e),n=0;n<o.length;n++)t.include(o[n]);return t}e.exports=function(e){return a(e).bbox()},e.exports.polygon=function(e){return a(e).polygon()},e.exports.bboxify=function(e){return n(e).map((function(e){e&&l.some((function(t){return!!e[t]&&-1!==s[t].indexOf(e.type)}))&&(e.bbox=a(e).bbox(),this.update(e))}))}},9340:e=>{e.exports=function(e){if(!e||!e.type)return null;var o=t[e.type];return o?"geometry"===o?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===o?{type:"FeatureCollection",features:[e]}:"featurecollection"===o?e:void 0:null};var t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},8714:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>d}),o(7327),o(2526),o(1817),o(9070),o(7941),o(5003),o(9554),o(4747),o(9337),o(3321);var r=o(2739),n=o.n(r),i=o(9319),s=o.n(i),l=o(1235),a=o(8007),u=o.n(a);function c(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function p(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function f(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y="#000000",b="#FFFFFF",h="rgba(255, 0, 0, 0.4)",g="#FFFFFF";const d=function(){function e(t,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.json=t,this.options=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?c(Object(o),!0).forEach((function(t){p(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):c(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({cluster:!0,heatmap:!1,clusterColor:"#ff0000"},o)}var t,o;return t=e,(o=[{key:"addTo",value:function(e){var t=this.json.features,o=t.filter((function(e){return"point"!==e.geometry.type.toLowerCase()})),r=t.filter((function(e){return"point"===e.geometry.type.toLowerCase()}));e.addSource("geolonia-simple-style",{type:"geojson",data:{type:"FeatureCollection",features:o}}),this.setPolygonGeometries(e),this.setLineGeometries(e),e.addSource("geolonia-simple-style-points",{type:"geojson",data:{type:"FeatureCollection",features:r},cluster:this.options.cluster,clusterMaxZoom:14,clusterRadius:50}),e.addLayer({id:"geolonia-simple-style-polygon-symbol",type:"symbol",source:"geolonia-simple-style",filter:["==","$type","Polygon"],paint:{"text-color":["string",["get","text-color"],y],"text-halo-color":["string",["get","text-halo-color"],b],"text-halo-width":1},layout:{"text-field":["get","title"],"text-font":["Noto Sans Regular"],"text-size":12,"text-max-width":12,"text-allow-overlap":!1}}),e.addLayer({id:"geolonia-simple-style-linestring-symbol",type:"symbol",source:"geolonia-simple-style",filter:["==","$type","LineString"],paint:{"text-color":["string",["get","text-color"],y],"text-halo-color":["string",["get","text-halo-color"],b],"text-halo-width":1},layout:{"symbol-placement":"line","text-field":["get","title"],"text-font":["Noto Sans Regular"],"text-size":12,"text-max-width":12,"text-allow-overlap":!1}}),this.setPointGeometries(e),this.setCluster(e);var n=e.getContainer();if(!n.dataset||!n.dataset.lng&&!n.dataset.lat){var i=s()(this.json);e.fitBounds(i,{duration:0,padding:30})}}},{key:"setPolygonGeometries",value:function(e){e.addLayer({id:"geolonia-simple-style-polygon",type:"fill",source:"geolonia-simple-style",filter:["==","$type","Polygon"],paint:{"fill-color":["string",["get","fill"],h],"fill-opacity":["number",["get","fill-opacity"],1],"fill-outline-color":["string",["get","stroke"],g]}}),this.setPopup(e,"geolonia-simple-style-polygon")}},{key:"setLineGeometries",value:function(e){e.addLayer({id:"geolonia-simple-style-linestring",type:"line",source:"geolonia-simple-style",filter:["==","$type","LineString"],paint:{"line-width":["number",["get","stroke-width"],2],"line-color":["string",["get","stroke"],h],"line-opacity":["number",["get","stroke-opacity"],1]},layout:{"line-cap":"round","line-join":"round"}}),this.setPopup(e,"geolonia-simple-style-linestring")}},{key:"setPointGeometries",value:function(e){e.addLayer({id:"circle-simple-style-points",type:"circle",source:"geolonia-simple-style-points",filter:["!",["has","point_count"]],paint:{"circle-radius":["case",["==","small",["get","marker-size"]],7,["==","large",["get","marker-size"]],13,9],"circle-color":["string",["get","marker-color"],h],"circle-opacity":["number",["get","fill-opacity"],1],"circle-stroke-width":["number",["get","stroke-width"],1],"circle-stroke-color":["string",["get","stroke"],g],"circle-stroke-opacity":["number",["get","stroke-opacity"],1]}}),e.addLayer({id:"symbol-simple-style-points",type:"symbol",source:"geolonia-simple-style-points",filter:["!",["has","point_count"]],paint:{"text-color":["string",["get","text-color"],y],"text-halo-color":["string",["get","text-halo-color"],b],"text-halo-width":1},layout:{"icon-image":["case",["==","large",["get","marker-size"]],["image",["concat",["get","marker-symbol"],"-15"]],["image",["concat",["get","marker-symbol"],"-11"]]],"text-field":["get","title"],"text-font":["Noto Sans Regular"],"text-size":12,"text-anchor":"top","text-max-width":12,"text-offset":["case",["==","small",["get","marker-size"]],["literal",[0,.6]],["==","large",["get","marker-size"]],["literal",[0,1.2]],["literal",[0,.8]]],"text-allow-overlap":!1}}),this.setPopup(e,"circle-simple-style-points")}},{key:"setPopup",value:function(e,t){e.on("click",t,(function(t){var o=(0,l.Z)(t.features[0]).geometry.coordinates,r=t.features[0].properties.description;r&&(new(n().Popup)).setLngLat(o).setHTML(u()(r)).addTo(e)})),e.on("mouseenter",t,(function(t){t.features[0].properties.description&&(e.getCanvas().style.cursor="pointer")})),e.on("mouseleave",t,(function(){e.getCanvas().style.cursor=""}))}},{key:"setCluster",value:function(e){e.addLayer({id:"clusters",type:"circle",source:"geolonia-simple-style-points",filter:["has","point_count"],paint:{"circle-radius":20,"circle-color":this.options.clusterColor,"circle-opacity":1}}),e.addLayer({id:"cluster-count",type:"symbol",source:"geolonia-simple-style-points",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-size":14,"text-font":["Noto Sans Regular"]}}),e.on("click","clusters",(function(t){var o=e.queryRenderedFeatures(t.point,{layers:["clusters"]}),r=o[0].properties.cluster_id;e.getSource("geolonia-simple-style-points").getClusterExpansionZoom(r,(function(t,r){t||e.easeTo({center:o[0].geometry.coordinates,zoom:r})}))})),e.on("mouseenter","clusters",(function(){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","clusters",(function(){e.getCanvas().style.cursor=""}))}}])&&f(t.prototype,o),e}()},11:e=>{e.exports=function e(t){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.reduce((function(t,o){return t.concat(e(o))}),[]),t;case"Feature":return t.geometry?e(t.geometry).map((function(e){var o={type:"Feature",properties:JSON.parse(JSON.stringify(t.properties)),geometry:e};return void 0!==t.id&&(o.id=t.id),o})):t;case"MultiPoint":return t.coordinates.map((function(e){return{type:"Point",coordinates:e}}));case"MultiPolygon":return t.coordinates.map((function(e){return{type:"Polygon",coordinates:e}}));case"MultiLineString":return t.coordinates.map((function(e){return{type:"LineString",coordinates:e}}));case"GeometryCollection":return t.geometries.map(e).reduce((function(e,t){return e.concat(t)}),[]);case"Point":case"Polygon":case"LineString":return[t]}}},3692:e=>{var t=e.exports=function(e){return new o(e)};function o(e){this.value=e}function r(e,t,o){var r=[],s=[],c=!0;return function e(p){var f=o?n(p):p,y={},b=!0,h={node:f,node_:p,path:[].concat(r),parent:s[s.length-1],parents:s,key:r.slice(-1)[0],isRoot:0===r.length,level:r.length,circular:null,update:function(e,t){h.isRoot||(h.parent.node[h.key]=e),h.node=e,t&&(b=!1)},delete:function(e){delete h.parent.node[h.key],e&&(b=!1)},remove:function(e){l(h.parent.node)?h.parent.node.splice(h.key,1):delete h.parent.node[h.key],e&&(b=!1)},keys:null,before:function(e){y.before=e},after:function(e){y.after=e},pre:function(e){y.pre=e},post:function(e){y.post=e},stop:function(){c=!1},block:function(){b=!1}};if(!c)return h;function g(){if("object"==typeof h.node&&null!==h.node){h.keys&&h.node_===h.node||(h.keys=i(h.node)),h.isLeaf=0==h.keys.length;for(var e=0;e<s.length;e++)if(s[e].node_===p){h.circular=s[e];break}}else h.isLeaf=!0,h.keys=null;h.notLeaf=!h.isLeaf,h.notRoot=!h.isRoot}g();var d=t.call(h,h.node);return void 0!==d&&h.update&&h.update(d),y.before&&y.before.call(h,h.node),b?("object"!=typeof h.node||null===h.node||h.circular||(s.push(h),g(),a(h.keys,(function(t,n){r.push(t),y.pre&&y.pre.call(h,h.node[t],t);var i=e(h.node[t]);o&&u.call(h.node,t)&&(h.node[t]=i.node),i.isLast=n==h.keys.length-1,i.isFirst=0==n,y.post&&y.post.call(h,i),r.pop()})),s.pop()),y.after&&y.after.call(h,h.node),h):h}(e).node}function n(e){if("object"==typeof e&&null!==e){var t;if(l(e))t=[];else if("[object Date]"===s(e))t=new Date(e.getTime?e.getTime():e);else if("[object RegExp]"===s(e))t=new RegExp(e);else if(function(e){return"[object Error]"===s(e)}(e))t={message:e.message};else if(function(e){return"[object Boolean]"===s(e)}(e))t=new Boolean(e);else if(function(e){return"[object Number]"===s(e)}(e))t=new Number(e);else if(function(e){return"[object String]"===s(e)}(e))t=new String(e);else if(Object.create&&Object.getPrototypeOf)t=Object.create(Object.getPrototypeOf(e));else if(e.constructor===Object)t={};else{var o=e.constructor&&e.constructor.prototype||e.__proto__||{},r=function(){};r.prototype=o,t=new r}return a(i(e),(function(o){t[o]=e[o]})),t}return e}o.prototype.get=function(e){for(var t=this.value,o=0;o<e.length;o++){var r=e[o];if(!t||!u.call(t,r)){t=void 0;break}t=t[r]}return t},o.prototype.has=function(e){for(var t=this.value,o=0;o<e.length;o++){var r=e[o];if(!t||!u.call(t,r))return!1;t=t[r]}return!0},o.prototype.set=function(e,t){for(var o=this.value,r=0;r<e.length-1;r++){var n=e[r];u.call(o,n)||(o[n]={}),o=o[n]}return o[e[r]]=t,t},o.prototype.map=function(e){return r(this.value,e,!0)},o.prototype.forEach=function(e){return this.value=r(this.value,e,!1),this.value},o.prototype.reduce=function(e,t){var o=1===arguments.length,r=o?this.value:t;return this.forEach((function(t){this.isRoot&&o||(r=e.call(this,r,t))})),r},o.prototype.paths=function(){var e=[];return this.forEach((function(t){e.push(this.path)})),e},o.prototype.nodes=function(){var e=[];return this.forEach((function(t){e.push(this.node)})),e},o.prototype.clone=function(){var e=[],t=[];return function o(r){for(var s=0;s<e.length;s++)if(e[s]===r)return t[s];if("object"==typeof r&&null!==r){var l=n(r);return e.push(r),t.push(l),a(i(r),(function(e){l[e]=o(r[e])})),e.pop(),t.pop(),l}return r}(this.value)};var i=Object.keys||function(e){var t=[];for(var o in e)t.push(o);return t};function s(e){return Object.prototype.toString.call(e)}var l=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e,t){if(e.forEach)return e.forEach(t);for(var o=0;o<e.length;o++)t(e[o],o,e)};a(i(o.prototype),(function(e){t[e]=function(t){var r=[].slice.call(arguments,1),n=new o(t);return n[e].apply(n,r)}}));var u=Object.hasOwnProperty||function(e,t){return t in e}},2868:()=>{},4777:()=>{},9830:()=>{},209:()=>{},7414:()=>{}}]);